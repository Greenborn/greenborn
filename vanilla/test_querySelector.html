<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Optimización $.d.qS</title>
    <style>
        .test-element {
            padding: 10px;
            margin: 5px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        .highlighted {
            background-color: yellow;
            border: 2px solid red;
        }
        #results {
            margin-top: 20px;
            padding: 10px;
            background-color: #e8f5e8;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Prueba de $.d.qS (document.querySelector)</h1>
    
    <div class="test-element" id="first-element">Primer elemento (ID: first-element)</div>
    <div class="test-element">Segundo elemento</div>
    <div class="test-element special">Tercer elemento (clase special)</div>
    
    <p class="test-element">Párrafo con misma clase</p>
    
    <ul>
        <li class="list-item">Item 1</li>
        <li class="list-item">Item 2</li>
        <li class="list-item special">Item 3 especial</li>
    </ul>
    
    <button id="test-button">Ejecutar Pruebas</button>
    <div id="results"></div>
    
    <script>
        // Función utilitaria para optimizar llamadas DOM
        const $ = {
            gId: (i) => document.getElementById(i),
            d: {
                sA: (s) => document.querySelectorAll(s),
                cE: (t) => document.createElement(t),
                qS: (s) => document.querySelector(s)
            }
        };
        
        function runTests() {
            const results = $.gId('results');
            results.innerHTML = '<h2>Resultados de las pruebas:</h2>';
            
            // Prueba 1: Seleccionar primer elemento por clase
            const firstByClass = $.d.qS('.test-element');
            if (firstByClass) {
                firstByClass.classList.add('highlighted');
                results.innerHTML += `<p>✅ Prueba 1: Primer elemento con clase 'test-element' encontrado y resaltado</p>`;
            } else {
                results.innerHTML += `<p>❌ Prueba 1: No se encontró elemento con clase 'test-element'</p>`;
            }
            
            // Prueba 2: Seleccionar por ID
            const byId = $.d.qS('#first-element');
            if (byId) {
                byId.style.fontWeight = 'bold';
                results.innerHTML += `<p>✅ Prueba 2: Elemento con ID 'first-element' encontrado y modificado</p>`;
            } else {
                results.innerHTML += `<p>❌ Prueba 2: No se encontró elemento con ID 'first-element'</p>`;
            }
            
            // Prueba 3: Seleccionar por selector complejo
            const specialElement = $.d.qS('.test-element.special');
            if (specialElement) {
                specialElement.style.backgroundColor = 'lightblue';
                specialElement.innerHTML += ' - ¡Modificado por $.d.qS()!';
                results.innerHTML += `<p>✅ Prueba 3: Elemento con clases 'test-element' y 'special' encontrado y modificado</p>`;
            } else {
                results.innerHTML += `<p>❌ Prueba 3: No se encontró elemento con clases múltiples</p>`;
            }
            
            // Prueba 4: Seleccionar primer item de lista
            const firstListItem = $.d.qS('li.list-item');
            if (firstListItem) {
                firstListItem.style.color = 'green';
                firstListItem.innerHTML += ' ← Primer item encontrado';
                results.innerHTML += `<p>✅ Prueba 4: Primer elemento 'li.list-item' encontrado y modificado</p>`;
            } else {
                results.innerHTML += `<p>❌ Prueba 4: No se encontró primer elemento de lista</p>`;
            }
            
            // Prueba 5: Selector inexistente
            const nonExistent = $.d.qS('.clase-inexistente');
            if (nonExistent === null) {
                results.innerHTML += `<p>✅ Prueba 5: Selector inexistente retorna null correctamente</p>`;
            } else {
                results.innerHTML += `<p>❌ Prueba 5: Selector inexistente no retorna null</p>`;
            }
            
            // Prueba 6: Selector por atributo
            const buttonElement = $.d.qS('button[id="test-button"]');
            if (buttonElement) {
                buttonElement.style.backgroundColor = 'lightgreen';
                results.innerHTML += `<p>✅ Prueba 6: Elemento button con atributo id encontrado y modificado</p>`;
            } else {
                results.innerHTML += `<p>❌ Prueba 6: No se encontró button por atributo</p>`;
            }
            
            console.log('✅ Todas las pruebas de $.d.qS() completadas correctamente');
        }
        
        // Agregar evento al botón
        $.gId('test-button').addEventListener('click', runTests);
        
        // Ejecutar pruebas automáticamente al cargar la página
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
